<div class="container mt-4">
  <h3>ğŸ‘¤ Gestion des employÃ©s</h3>

  <!-- Bouton pour dÃ©clencher le formulaire -->
  <button class="btn btn-primary mb-3" (click)="employeEnCours = {
    nom: '', prenom: '', email: '', nomUtilisateur: '', motDePasse: '', role: 'employe'
  }">â• Ajouter un employÃ©</button>

  <!-- Formulaire crÃ©ation / modification -->
  <form *ngIf="employeEnCours" (ngSubmit)="employeEnCours._id ? enregistrerModification() : ajouterEmploye()">
    <div class="row">
      <div class="col-md-3 mb-2">
        <input class="form-control" placeholder="Nom" [(ngModel)]="employeEnCours.nom" name="nom" required />
      </div>
      <div class="col-md-3 mb-2">
        <input class="form-control" placeholder="PrÃ©nom" [(ngModel)]="employeEnCours.prenom" name="prenom" required />
      </div>
      <div class="col-md-3 mb-2">
        <input class="form-control" type="email" placeholder="Email" [(ngModel)]="employeEnCours.email" name="email" required />
      </div>
      <div class="col-md-3 mb-2">
        <input class="form-control" placeholder="Nom d'utilisateur" [(ngModel)]="employeEnCours.nomUtilisateur" name="nomUtilisateur" required />
      </div>
      <div class="col-md-3 mb-2">
        <input class="form-control" type="password" placeholder="Mot de passe (laisser vide pour ne pas changer)"
              [(ngModel)]="employeEnCours.motDePasse" name="motDePasse" [required]="!employeEnCours._id" />
      </div>

      <div class="col-md-3 mb-2">
        <select class="form-select" [(ngModel)]="employeEnCours.role" name="role" required>
          <option [ngValue]="'admin'">Administrateur</option>
          <option [ngValue]="'employe'">EmployÃ©</option>
        </select>
      </div>
    </div>

    <button type="submit" class="btn mt-2"
      [ngClass]="employeEnCours._id ? 'btn-warning' : 'btn-success'">
      {{ employeEnCours._id ? 'ğŸ’¾ Enregistrer les modifications' : 'â• Ajouter un EmployÃ©' }}
    </button>
  </form>

  <!-- Liste des employÃ©s -->
  <h5 class="mt-4">ğŸ‘¥ Liste des employÃ©s</h5>
  <ul class="list-group mb-4">
    <li *ngFor="let employe of employes" class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <strong>{{ employe.nom }}</strong> {{ employe.prenom }} â€” {{ employe.email }} â€” RÃ´le : <strong>{{ employe.role }}</strong>
      </div>
      <div>
        <button class="btn btn-sm btn-warning me-2" (click)="modifierEmploye(employe)">âœï¸</button>
        <button class="btn btn-sm btn-danger" (click)="supprimerEmploye(employe._id!)">ğŸ—‘ï¸</button>
      </div>
    </li>
  </ul>
</div>
